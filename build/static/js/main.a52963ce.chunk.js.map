{"version":3,"sources":["components/board.js","components/volume.js","components/utils.js","index.js"],"names":["Stone","color","this","props","value","className","onClick","React","Component","BoardRow","i","squares","renderStone","index","Board","Volume","volume","calculateWinner","dirList","row","Math","trunc","col","a","b","c","d","checkJump","console","log","dir","array","length","element","audioPlay","path","audio","Audio","play","then","catch","error","warn","Game","state","history","Array","fill","stepNumber","xIsNext","isEnter","isDraw","slice","place","isPlaceable","setState","winner_streak","winner","match","includes","concat","step","newVolume","status","current","onGame","jumpTo","toggleVolume","handleClick","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a52963ce.chunk.js","sourcesContent":["import React from 'react';\nimport '../index.css';\n\nclass Stone extends React.Component {\n  render() {\n    let color;\n    if (this.props.value === null)\n      color = \"\";\n    else\n      color = this.props.value === 'X' ? 'stone-color1' : 'stone-color2';\n    return (\n      <button className={'stone ' + color} onClick={() => {\n        this.props.onClick();\n        }}>\n      </button>\n    )\n  }\n}\n\nclass BoardRow extends React.Component {\n  renderStone(i) {\n    return (\n      <Stone \n        value={this.props.squares[i]} \n        onClick={() => this.props.onClick(i)}\n      />\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"board-row\">\n        {this.renderStone(this.props.index * 7 + 0)}\n        {this.renderStone(this.props.index * 7 + 1)}\n        {this.renderStone(this.props.index * 7 + 2)}\n        {this.renderStone(this.props.index * 7 + 3)}\n        {this.renderStone(this.props.index * 7 + 4)}\n        {this.renderStone(this.props.index * 7 + 5)}\n        {this.renderStone(this.props.index * 7 + 6)}\n      </div>\n    )\n  }\n}\n\nclass Board extends React.Component {\n  render() {\n    return (\n      <div>\n        <BoardRow\n          index={0}\n          squares={this.props.squares}\n          onClick={(i) =>this.props.onClick(i)}\n        />\n        <BoardRow\n          index={1}\n          squares={this.props.squares}\n          onClick={(i) =>this.props.onClick(i)}\n        />\n        <BoardRow\n          index={2}\n          squares={this.props.squares}\n          onClick={(i) =>this.props.onClick(i)}\n        />\n        <BoardRow\n          index={3}\n          squares={this.props.squares}\n          onClick={(i) =>this.props.onClick(i)}\n        />\n        <BoardRow\n          index={4}\n          squares={this.props.squares}\n          onClick={(i) =>this.props.onClick(i)}\n        />\n        <BoardRow\n          index={5}\n          squares={this.props.squares}\n          onClick={(i) =>this.props.onClick(i)}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Board;","import React from 'react';\nimport '../index.css';\n\n\nclass Volume extends React.Component {\n  render() {\n    const volume = this.props.volume;\n    if (volume === 1) {\n      return (\n        <div className=\"volume\">\n          <i className=\"fas fa-volume-up fa-3x\"\n            onClick={() => this.props.onClick()}\n          ></i>\n        </div>);\n    } else if (volume === 0.5) {\n      return (\n        <div className=\"volume\">\n          <i className=\"fas fa-volume-down fa-3x\"\n            onClick={() => this.props.onClick()}\n          ></i>\n        </div>);\n    } else {\n      return (\n        <div className=\"volume\">\n          <i className=\"fas fa-volume-off fa-3x\"\n            onClick={() => this.props.onClick()}\n          ></i>\n        </div>);\n    }\n  }\n}\n\nexport default Volume;","\n\n//  return placeable index number, or return null if stone is full on col\nexport function isPlaceable(squares, i) {\n  const col = i % 7;\n  for (let row = 0; row < 6; row++) {\n    const index = row * 7 + col;\n    if (squares[index] !== null) {\n      if (row === 0)\n      return null;\n      else\n      return index - 7;\n    }\n  }\n  return col + 35;\n}\n\nexport function calculateWinner(squares, index) {\n  if (index === 42) {\n    return null;\n  }\n  if (squares[index] === null)\n    return calculateWinner(squares, index + 1);\n  const dirList =[\n    [0,1], [-1,1], [-1,0], [-1,-1], [0,-1], [1,-1], [1,0], [1,1]\n  ];// 右,  右上,     上,     左上,     左,     左下,   下、    右下\n\n  const row = Math.trunc(index / 7);\n  const col = index % 7;\n\n  for (let i = 0; i < 8; i++) {\n    const [a, b, c, d] = [\n      (row + dirList[i][0] * 0) * 7 + (col + dirList[i][1] * 0),\n      (row + dirList[i][0] * 1) * 7 + (col + dirList[i][1] * 1),\n      (row + dirList[i][0] * 2) * 7 + (col + dirList[i][1] * 2),\n      (row + dirList[i][0] * 3) * 7 + (col + dirList[i][1] * 3)\n    ];\n    if (!checkJump(i, [a, b, c]))\n      continue;\n    if (squares[a] === squares[b] && squares[a] === squares[c] && squares[a] === squares[d]) {\n      console.log(a);\n      console.log(b);\n      console.log(c);\n      console.log(d);\n      return [a, b, c, d];\n    }\n  }\n  return calculateWinner(squares, index + 1);\n}\n\nfunction checkJump(dir, array) {\n  for (let i = 0; i < array.length; i++) {\n    const element = array[i];\n    const row = Math.trunc(element / 7);\n    const col = element % 7;\n\n    if ((col === 0 && dir >= 3 && dir <= 5)\n      || (row === 0 && dir >= 1 && dir <= 3)\n      || (col === 6 && (dir <= 1 || dir === 7))\n      || (row === 5 && dir >= 6 && dir <= 8))\n    return false;\n  }\n  return true;\n}\n\nexport function audioPlay (path, volume) {\n  const audio = new Audio(path);\n  audio.volume = volume;\n  audio.play().then(() => {\n    console.log(\"Audio started!\")\n  })\n    .catch(error => console.warn(error))\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nimport Board from './components/board';\nimport Volume from './components/volume';\nimport {isPlaceable, calculateWinner, audioPlay} from './components/utils.js';\n\n// TODO: Board grid\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      history: [{\n        squares: Array(42).fill(null),\n      }],\n      stepNumber: 0,\n      xIsNext: true,\n      isEnter: false,\n      isDraw: false,\n      volume: 1\n    }\n  }\n\n  handleClick(i) {\n    if (!this.state.isEnter || this.state.isDraw)\n      return;\n    const history = this.state.history.slice(0, this.state.stepNumber + 1);\n    const current = history[history.length - 1];\n    const squares = current.squares.slice();\n    const place = isPlaceable(squares, i);\n    if (calculateWinner(squares, 0) || place === null) {\n      return;\n    }\n    squares[place] = this.state.xIsNext ? 'X'  : 'O';\n    if (this.state.stepNumber === 41)\n      this.setState({\n        isDraw: true\n      });\n\n    const winner_streak = calculateWinner(squares, 0);\n    const winner = winner_streak ? squares[winner_streak[0]] : null;\n    if (winner_streak) {\n      for (let i = 0; i < squares.length; i++) {\n        const match = winner_streak.includes(i);\n        squares[i] = match ? winner : null;\n      }\n    }\n\n    this.setState({\n      history: history.concat([{\n        squares: squares,\n      }]),\n      stepNumber: history.length,\n      xIsNext: !this.state.xIsNext,\n    });\n  }\n\n  jumpTo(step) {\n    this.setState({\n      stepNumber: step,\n      xIsNext: (step % 2) === 0,\n    });\n  }\n\n  toggleVolume() {\n    let newVolume;\n    if (this.state.volume === 1) {\n      newVolume = 0.5;\n    } else if (this.state.volume === 0.5) {\n      newVolume = 0;\n    } else {\n      newVolume = 1;\n    }\n    console.log(newVolume);\n    this.setState({\n      volume: newVolume\n    })\n  }\n\n  render() {\n    const history = this.state.history;\n    const current = history[this.state.stepNumber];\n    const winner_streak = calculateWinner(current.squares, 0);\n    const winner = winner_streak ? current.squares[winner_streak[0]] : null;\n    let status;\n    if (this.state.isDraw){\n      status = 'Draw'\n    } else if (winner) {\n      status = 'Winner: ' + winner;\n    } else {\n      status = 'Next player: ' + (this.state.xIsNext ? 'X' : 'O');\n    }\n\n    const onGame = this.state.isEnter ? \" board-on\" : \"\";\n\n    return (\n      <div className=\"game\">\n          <div className=\"game-title\">\n            <span className=\"neon flash\">電<span>電</span></span>\n            <span className=\"neon flash\">脳<span>脳</span></span>\n            <span className=\"neon flash\">盤<span>盤</span></span>\n            <span className=\"neon flash\">上<span>上</span></span>\n            <span className=\"neon flash\">娯<span>娯</span></span>\n            <span className=\"neon flash\">楽<span>楽</span></span>\n            <span className=\"neon flash\">&nbsp;<span>&nbsp;</span></span>\n            <span className=\"neon flash\">四<span>四</span></span>\n            <span className=\"neon flash\">子<span>子</span></span>\n            <span className=\"neon flash\">棋<span>棋</span></span>\n          </div>\n        <div className=\"game-info\">\n          <div>{status}</div>\n          <button className=\"reset-button\"\n          onClick={() => {\n            audioPlay(\"audio/switch.mp3\", this.state.volume);\n            this.jumpTo(0);}}>\n          RESET\n          </button>\n          <Volume\n            volume={this.state.volume}\n            onClick={() => {\n              this.toggleVolume();\n              audioPlay(\"audio/switch.mp3\", this.state.volume);\n            }}\n          ></Volume>\n          <button className=\"enter-button\"\n            onClick={() => {\n              if (!this.state.isEnter) {\n                audioPlay(\"audio/bell_sound.mp3\", this.state.volume);\n                this.setState({isEnter : true});\n              }\n            }}> 入場 ☞ </button>\n        </div>\n        <div className=\"game-body\">\n          <div className={\"game-board\" + onGame}>\n            <Board \n              squares={current.squares}\n              onClick={(i) => {\n                if (this.state.isEnter)\n                  audioPlay(\"audio/switch.mp3\", this.state.volume);\n                this.handleClick(i);\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n// ========================================\n\nReactDOM.render(<Game />, document.getElementById('root'));\n"],"sourceRoot":""}